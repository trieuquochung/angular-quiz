import{$b as Q,R as m,W as b,a as o,b as u,bc as l,cc as c,dc as f,ec as d,fc as p,hc as v,l as s,q as n}from"./chunk-WSEWWAZC.js";var D=class r{firestore=b(Q);questionsCollection=c(this.firestore,"questions");resultsCollection=c(this.firestore,"quizResults");getQuestions(){return s(p(this.questionsCollection)).pipe(n(t=>t.docs.map(e=>o({id:e.id},e.data()))))}addQuestion(t){let e=u(o({},t),{createdAt:new Date,updatedAt:new Date});return s(l(this.questionsCollection,e)).pipe(n(i=>i.id))}updateQuestion(t,e){let i=d(this.firestore,"questions",t),a=u(o({},e),{updatedAt:new Date});return s(v(i,a))}deleteQuestion(t){let e=d(this.firestore,"questions",t);return s(f(e))}saveQuizResult(t,e,i){let a={sessionId:this.generateSessionId(),results:t,score:e,totalQuestions:i,completedAt:new Date};return s(l(this.resultsCollection,a)).pipe(n(g=>g.id))}getQuizResults(){return s(p(this.resultsCollection)).pipe(n(t=>t.docs.map(e=>o({id:e.id},e.data()))))}generateSessionId(){return"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})};export{D as a};
